When a program calls a function such as printf, it pushes the return address onto the stack before transferring control to the function. The return address is the address in the program's code that the function should return to when it is finished executing.

In a format string vulnerability, the attacker can use the %n specifier in a format string to write a value to a specific memory location. If the attacker can control the value of the argument passed to the %n specifier, they can use it to write to an arbitrary location in memory, including the return address on the stack.

Therefore, if you use a format string payload with the %n specifier to overwrite the return address on the stack, you are effectively overwriting the address that the printf function should return to when it is finished executing. This allows you to redirect program execution to a different location in the code, such as the first gadget in a ROP chain.
